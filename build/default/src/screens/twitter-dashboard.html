<!--paper elements--><link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../../bower_components/paper-input/paper-textarea.html">
<link rel="import" href="../../bower_components/paper-toast/paper-toast.html">

<!--iron elements-->
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">

<!--vaadin elements-->
<link rel="import" href="../../bower_components/vaadin-combo-box/vaadin-combo-box.html">

<!--My elements-->
<link rel="import" href="../elements/twitter-tweet.html">
<link rel="import" href="../elements/twitter-info.html">
<link rel="import" href="../elements/twitter-info-popular.html">
<link rel="import" href="../elements/twitter-query.html">

<dom-module id="twitter-dashboard">
	<template>
		<style is="custom-style">
			paper-toolbar {
         		--paper-toolbar-background: #FFFFFF;
         		--paper-toolbar-color: var(--paper-gray-900);
      		}
      		paper-input {
      			margin: 1em;
      		}
      		paper-header-panel {
      			--background-color: blue;
      		}
      		vaadin-combo-box{
				margin: 1em;
				padding: 0.5em;
			}
			paper-button{
				background-color: #D2AA42;
			}
			h1, h2 {
				font-family:"Arial", Times, serif;
			}

		</style>
		<paper-header-panel class="flex" style="background-color: #e1f5fe;">
			<paper-toolbar id="toolbar">&gt;
				<paper-icon-button icon="menu" on-tap="togglePanel" paper-drawer-toggle=""></paper-icon-button>
				<div class="title"><span style="color: gray; font-weight: bold; font-size: 24;">Dashboard</span></div>
				<paper-icon-button on-tap="refresh" icon="refresh"></paper-icon-button>
			</paper-toolbar>
			<div style="margin-top: 35px;">
				<center>
				<table class="egt">
				<tbody><tr>
					<td>
						<h2>Últimos Tweets</h2>
					</td>
					<td rowspan="6" style="width: 2%;">
						
					</td>
					<td>
						<h2>Información de Tweets</h2>
					</td>
				</tr>
				<tr>
					<td rowspan="6" style="width: 30%; min-width: 300px;">
						<div>
							<!--iron-scroll-threshold on-lower-threshold="loadMoreData" id="threshold" lower-threshold="1">
								<iron-list as="item" scroll-target="html" id="tweetList">
									<template>
										<twitter-tweet item="[[item]]"></twitter-tweet>
									</template>
								</iron-list>

							</iron-scroll-threshold-->
							<twitter-tweet id="tweet0"></twitter-tweet>
							<twitter-tweet id="tweet1"></twitter-tweet>
							<twitter-tweet id="tweet2"></twitter-tweet>
							<twitter-tweet id="tweet3"></twitter-tweet>
							<twitter-tweet id="tweet4"></twitter-tweet>
							<twitter-tweet id="tweet5"></twitter-tweet>
							<twitter-tweet id="tweet6"></twitter-tweet>
							<twitter-tweet id="tweet7"></twitter-tweet>
							<twitter-tweet id="tweet8"></twitter-tweet>
							<twitter-tweet id="tweet9"></twitter-tweet>
							
							<div id="msgLoad">
								<center>
									No hay mas Tweets
								</center>
							</div>
						</div>
						
					</td>
					<td style="width: 45%;">
						<div>
							<twitter-info></twitter-info>
						</div>
					</td>
				</tr>

				<tr>
					<td style="width: 45%;">
						<h2>Tweets Populares</h2>
					</td>
				</tr>

				<tr>
					<td style="width: 45%;">
						<div>
							<twitter-info-popular></twitter-info-popular>
						</div>
					</td>
				</tr>

				<tr>
					<td style="width: 45%;">
						<h2>Consultas</h2>
					</td>
				</tr>

				<tr>
					<td style="width: 45%;">
						<div>
							<twitter-query></twitter-query>
						</div>
					</td>
				</tr>
				</tbody></table>
				</center>
			</div>

			<paper-toast id="toastMessage" duration="1000">
			</paper-toast>
		</paper-header-panel>
		<iron-ajax id="ajax" content-type="application/json" body="{{bodyRequest}}" url="{{serverURL}}" method="POST" on-response="response" on-error="callbackError" handle-as="jsonp" debounce-duration="300">  	
		</iron-ajax>
	</template>
	<script>Polymer({
  is: 'twitter-dashboard',
  listeners: {
  	tagQueryDashboard: 'tagQueryDashboard',
  	userQueryDashboard: 'userQueryDashboard'
  },
  properties: {
    bodyRequest: {
      type: String,
      value: ""
    },
    loadingData: {
      type: Boolean,
      value: true
    },
    serverURL: {
      type: String,
      value: "https://us-central1-elated-scope-174804.cloudfunctions.net/function-2"
    }
  },
  ready: function () {
	APP.frontTweets = [];
	APP.frontTweets.push(this.$.tweet0);
	APP.frontTweets.push(this.$.tweet1);
	APP.frontTweets.push(this.$.tweet2);
	APP.frontTweets.push(this.$.tweet3);
	APP.frontTweets.push(this.$.tweet4);
	APP.frontTweets.push(this.$.tweet5);
	APP.frontTweets.push(this.$.tweet6);
	APP.frontTweets.push(this.$.tweet7);
	APP.frontTweets.push(this.$.tweet8);
	APP.frontTweets.push(this.$.tweet9);
/*    for(tweet in APP.tweets){
    	this.$[idElement].item = tweet;	
    	this.$[idElement].hidden = false;
    }
*/
	for(tweet in APP.frontTweets){
  		APP.frontTweets[tweet].hidden = true;
  	}
  
  	for(tweet in APP.tweets){
  		APP.frontTweets[tweet].hidden = false;
  		APP.frontTweets[tweet].item = APP.tweets[tweet];
  	}
  },
  refresh: function () {
   	console.log("refresh " + JSON.stringify(APP.tweets));
  	console.log("API.tweets " + APP.tweets.length);
  	for(tweet in APP.frontTweets){
  		APP.frontTweets[tweet].hidden = true;
  	}
  
  	for(tweet in APP.tweets){
  		APP.frontTweets[tweet].hidden = false;
  		APP.frontTweets[tweet].item = APP.tweets[tweet];
  	}
  	/*
	if(APP.tweets.length >= 1){
		this.$.tweet0.hidden = false;
		this.$.tweet0.item = APP.tweets[0];
	}
	if(APP.tweets.length >= 2){
		this.$.tweet1.hidden = false;
		this.$.tweet1.item = APP.tweets[1];
	}
	if(APP.tweets.length >= 3){
		this.$.tweet2.hidden = false;
		this.$.tweet2.item = APP.tweets[2];
	}
	if(APP.tweets.length >= 4){
		this.$.tweet3.hidden = false;
		this.$.tweet3.item = APP.tweets[3];
	}
	if(APP.tweets.length >= 5){
		this.$.tweet4.hidden = false;
		this.$.tweet4.item = APP.tweets[4];
	}
	if(APP.tweets.length >= 6){
		this.$.tweet5.hidden = false;
		this.$.tweet5.item = APP.tweets[5];
	}
	if(APP.tweets.length >= 7){
		this.$.tweet6.hidden = false;
		this.$.tweet6.item = APP.tweets[6];
	}
	if(APP.tweets.length >= 8){
		this.$.tweet7.hidden = false;
		this.$.tweet7.item = APP.tweets[7];
	}
	if(APP.tweets.length >= 9){
		this.$.tweet8.hidden = false;
		this.$.tweet8.item = APP.tweets[8];
	}
	if(APP.tweets.length >= 10){
		this.$.tweet9.hidden = false;
		this.$.tweet9.item = APP.tweets[9];
	}*/
  },
  tagQueryDashboard: function(e){
  	this.fire('tagQueryMain', e.detail);
  },
  userQueryDashboard: function(e){
  	this.fire('userQueryMain', e.detail);
  }
});</script>
</dom-module>