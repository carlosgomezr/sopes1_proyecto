<!--paper elements--><link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../../bower_components/paper-input/paper-textarea.html">
<link rel="import" href="../../bower_components/paper-toast/paper-toast.html">

<!--iron elements-->
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">

<!--vaadin elements-->
<link rel="import" href="../../bower_components/vaadin-combo-box/vaadin-combo-box.html">

<!--My elements-->
<link rel="import" href="../elements/twitter-tweet.html">
<link rel="import" href="../elements/twitter-info.html">
<link rel="import" href="../elements/twitter-user-info.html">

<dom-module id="twitter-user">
	<template>
		<style is="custom-style">
			paper-toolbar {
         		--paper-toolbar-background: #FFFFFF;
         		--paper-toolbar-color: var(--paper-gray-900);
      		}
      		paper-input {
      			margin: 1em;
      		}
      		paper-header-panel {
      			--background-color: blue;
      		}
      		vaadin-combo-box{
				margin: 1em;
				padding: 0.5em;
			}
			paper-button{
				background-color: #D2AA42;
			}
			h1, h2 {
				font-family:"Arial", Times, serif;
			}

		</style>
		<paper-header-panel class="flex" style="background-color: #e1f5fe;">
			<paper-toolbar id="toolbar">&gt;
				<paper-icon-button icon="menu" on-tap="togglePanel" paper-drawer-toggle=""></paper-icon-button>
				<div class="title"><span style="color: gray; font-weight: bold; font-size: 24;">Usuario</span></div>
				<paper-icon-button on-tap="ready" icon="refresh"></paper-icon-button>
			</paper-toolbar>
			<div style="margin-top: 35px;">
				<center>
				<table class="egt">
				<tbody><tr>
					<td>
						<h2>Información Usuario [[title]]</h2>
						<twitter-user-info nombre='[[title]]' alias='[[title]]'></twitter-user-info>
					</td>
					<td rowspan="6" style="width: 2%;">
						
					</td>
					<td>
						
					</td>
				</tr>
				<tr>
					<td rowspan="6" style="width: 30%; min-width: 300px;">
						<h2>Últimos 3 Tweets</h2>
						<div>
							<!--iron-scroll-threshold on-lower-threshold="loadMoreData" id="threshold" lower-threshold="10">
								<iron-list as="item" scroll-target="html" id="tweetList">
									<template>
										<twitter-tweet item="[[item]]"></twitter-tweet>
									</template>
								</iron-list>
								<div id="msgLoad">
									<center>
										No hay mas Tweets
									</center>
								</div>
							</iron-scroll-threshold-->
							<twitter-tweet id="tweet0"></twitter-tweet>
							<twitter-tweet id="tweet1"></twitter-tweet>
							<twitter-tweet id="tweet2"></twitter-tweet>
							No hay mas Tweets
						</div>
						
					</td>
				</tr>
				</tbody></table>
				</center>
			</div>

			<paper-toast id="toastMessage" duration="1000">
			</paper-toast>
		</paper-header-panel>
		<iron-ajax id="ajax" content-type="application/json" body="{{bodyRequest}}" url="{{serverURL}}" method="POST" on-response="response" on-error="callbackError" handle-as="jsonp" debounce-duration="300">  	
		</iron-ajax>
	</template>
	<script>Polymer({
  is: 'twitter-user',
  listeners: {},
  properties: {
    bodyRequest: {
      type: String,
      value: ""
    },
    loadingData: {
      type: Boolean,
      value: true
    },
    serverURL: {
      type: String,
      value: "https://us-central1-elated-scope-174804.cloudfunctions.net/function-2"
    }
  },
  ready: function () {
    APP.frontUserTweets = [];
	APP.frontUserTweets.push(this.$.tweet0);
	APP.frontUserTweets.push(this.$.tweet1);
	APP.frontUserTweets.push(this.$.tweet2);

	for(tweet in APP.frontUserTweets){
  		APP.frontUserTweets[tweet].hidden = true;
  	}
  
  	for(tweet in APP.userTweets){
  		APP.frontUserTweets[tweet].hidden = false;
  		APP.frontUserTweets[tweet].item = APP.userTweets[tweet];
  	}
  }
});</script>
</dom-module>