<!--doctype html--><html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

    <title>Tweets-Dentro de build</title>
    <meta name="description" content="tracker-task description">

    <!-- See https://goo.gl/OOhYW5 -->
    <link rel="manifest" href="/manifest.json">
    <link rel="shortcut icon" href="/src/img/renap.ico">
   
    <script src="/bower_components/webcomponentsjs/webcomponents-lite.js"></script>
    <link rel="import" href="/src/twitter-client-app/twitter-client-app.html">
    <script src="/src/js/APP.js"></script>
    <style is="custom-style"> 
      :root {
        --primary-color: var(--paper-black);
        --dark-theme-text-color: black;
      }
    </style>
  </head>
  <body>
    <!--<login-element id="mainlogin"></login-element> -->
    <twitter-client-app></twitter-client-app>
  </body>
  <footer>
    
    <script src="/socket.io/socket.io.js"></script>
    <script type="text/javascript">
      const socket = io();
      //Para recibir los ultimos 10 tweets creados de un solo
      socket.on('recibir10',(cb) =>{
          console.log("respuesta de recibir10:");
          console.log(cb);
          APP.tweets = cb;

          for(tweet in APP.frontTweets){
            APP.frontTweets[tweet].hidden = true;
          }
        
          for(tweet in APP.tweets){
            APP.frontTweets[tweet].hidden = false;
            APP.frontTweets[tweet].item = APP.tweets[tweet];
          }
      });
      //Para recibir el ultimo tweet creado
      socket.on('recibirUltimo',(cb) =>{
          console.log("respuesta de recibirUltimo:");
          console.log(cb);
          APP.tweets.push(cb);
          console.log(" new sizex2 " + APP.tweets.length);

          for(tweet in APP.frontTweets){
            APP.frontTweets[tweet].hidden = true;
          }
        
          for(tweet in APP.tweets){
            APP.frontTweets[tweet].hidden = false;
            APP.frontTweets[tweet].item = APP.tweets[tweet];
          }
      });

      //Para recibir el total de usuarios
      socket.on('recibirTotalUsuarios',(cb) =>{
          console.log("recibirTotalDeUsuarios");
          console.log(cb);
          APP.totalDeUsuarios.innerHTML = cb;
      });
      //Para recibir el total de tweets
      socket.on('recibirTotalTweets',(cb) =>{
          console.log("recibirTotalTweets");
          console.log(cb);
          APP.totalDeTweets.innerHTML = cb;
      });
      //Para recibir el total de categorias
      socket.on('recibirTotalCategorias',(cb) =>{
          console.log("recibirTotalCategorias:");
          console.log(cb);
          APP.totalDeCategorias.innerHTML = cb;
      });
      //Para recibir el usuario con mas tweets
      socket.on('recibirTopUsuario',(cb) =>{
          console.log("recibirTopUsuario:");
          console.log(cb);
          APP.infoUser.innerHTML = cb.usuario;
      });
      //Para recibir La categoria con mas tweets  
      socket.on('recibirCategoriaTop',(cb) =>{
          console.log("recibirCategoriaTop:");
          console.log(cb);
          APP.infoTag.innerHTML = cb.categoria;
      });
      
          
      
      
      /*
      Despues de preparar todos los metodo para la recibida de datos
      Se inicia a pedir la informacion
      */
      socket.emit('obtener10',"porfa..");
      socket.emit('obtenerTotalUsuarios',"porfa..");
      socket.emit('obtenerTotalTweets',"porfa..");
      socket.emit('obtenerTotalCategorias',"porfa..");
      socket.emit('obtenerTopUsuario',"porfa..");
      socket.emit('obtenerCategoriaTop',"porfa..");
      
      
      
      /**
      Estos metodos son los que reciben la info para las demas vistas..
      */
      //tweets de un usuario en especifico
      socket.on('recibirTweetsOf',(cb) =>{
        console.log("recibirtweets de un usuario..:");
          console.log(cb);
          APP.userTweets = cb; 

          for(tweet in APP.frontUserTweets){
            APP.frontUserTweets[tweet].hidden = true;
          }
        
          for(tweet in APP.userTweets){
            APP.frontUserTweets[tweet].hidden = false;
            APP.frontUserTweets[tweet].item = APP.userTweets[tweet];
          }
      });
      //numero de tweets de un usuario en especifico
      socket.on('recibirTotalTweetsOf',(cb) =>{
          console.log("recibi TotalTweets de usuario:");
          console.log(cb);
          APP.totalDeTweetsPorUsuario.innerHTML = cb;
      });
      //tweets de una categoria en especifico
      socket.on('recibirTweetsCat',(cb) =>{
          console.log("recibi tweets de la categoria: ");
          console.log(cb);
          APP.tagTweets = cb;

          for(tweet in APP.frontTagTweets){
            APP.frontTagTweets[tweet].hidden = true;
          }
        
          for(tweet in APP.tagTweets){
            APP.frontTagTweets[tweet].hidden = false;
            APP.frontTagTweets[tweet].item = APP.tagTweets[tweet];
          }
      });
      //numero de tweets de una categoria en especifico
      socket.on('recibirTotalTweetsCat',(cb) =>{
          console.log("recibi TotalTweets de categoria:");
          console.log(cb);
          APP.totalDeCategoriasEspecifico.innerHTML = cb;
      });
      /*
      Asi se obtendria la info para las otras dos vistas
      */
      socket.emit('obtenerTweetsOfUser', APP.usuario);
      socket.emit('obtenerNumTweetsOfUser', APP.usuario);
      socket.emit('obtenerTweetsOfCat', APP.categoria);
      socket.emit('obtenerNumTweetsOfCat', APP.categoria);
      
      
    </script>
  </footer>
</html>